<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang ch·ªß - Gaming Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        :root {
            --primary-color: #00ff88;
            --bg-dark: #0a0e27;
            --bg-card: #1a1f3a;
            --text-primary: #ffffff;
            --text-secondary: #b0b8d4;
        }
        body { 
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%); 
            color: var(--text-primary); 
        }
        .hero { 
            padding: 6rem 0; 
            text-align: center; 
        }
        .hero h1 { 
            font-size: 3rem; 
            font-weight: 700; 
            background: linear-gradient(135deg, var(--primary-color), #00ccff); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            margin-bottom: 1.5rem; 
        }
        .hero p { 
            font-size: 1.2rem; 
            color: var(--text-secondary); 
            margin-bottom: 2rem; 
        }
        .section-title { 
            text-align: center; 
            margin-bottom: 3rem; 
        }
        .section-title h2 { 
            font-size: 2.5rem; 
            color: var(--text-primary); 
            margin-bottom: 0.5rem; 
        }
        .product-card { 
            background: var(--bg-card); 
            border: 1px solid rgba(0, 255, 136, 0.2); 
            border-radius: 10px; 
            padding: 1.5rem; 
            transition: all 0.3s ease; 
            text-align: center; 
            height: 100%;
        }
        .product-card:hover { 
            border-color: var(--primary-color); 
            transform: translateY(-5px); 
            box-shadow: 0 8px 24px rgba(0, 255, 136, 0.2); 
        }
        .product-card img { 
            width: 100%; 
            height: 200px; 
            object-fit: cover; 
            border-radius: 8px; 
            margin-bottom: 1rem; 
        }
        .product-card h5 { 
            color: var(--text-primary); 
            margin: 1rem 0; 
            min-height: 48px;
        }
        .product-price { 
            font-size: 1.5rem; 
            color: var(--primary-color); 
            font-weight: 700; 
        }
        .product-price-old {
            font-size: 1rem;
            color: var(--text-secondary);
            text-decoration: line-through;
            margin-right: 0.5rem;
        }
        .btn-primary { 
            background: linear-gradient(135deg, var(--primary-color), #00ccff); 
            border: none; 
            color: var(--bg-dark); 
            font-weight: 600; 
            transition: all 0.3s ease; 
        }
        .btn-primary:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 20px rgba(0, 255, 136, 0.3); 
            color: var(--bg-dark); 
        }
        .products-section { 
            padding: 3rem 0; 
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div th:replace="~{layout/header :: header}"></div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1><i class="fas fa-gamepad"></i> Gaming Shop</h1>
            <p>Kh√°m ph√° b·ªô s∆∞u t·∫≠p thi·∫øt b·ªã gaming cao c·∫•p t·ª´ c√°c th∆∞∆°ng hi·ªáu h√†ng ƒë·∫ßu</p>
            <a th:href="@{/san-pham}" class="btn btn-primary btn-lg">
                <i class="fas fa-shopping-bag"></i> Mua s·∫Øm ngay
            </a>
        </div>
    </section>

    <!-- Hot Products -->
    <section class="products-section" th:if="${hotProducts != null and !hotProducts.isEmpty()}">
        <div class="container">
            <div class="section-title">
                <h2>üî• S·∫£n ph·∫©m ƒëang gi·∫£m gi√°</h2>
                <p>Nh·ªØng s·∫£n ph·∫©m t·ªët nh·∫•t v·ªõi m·ª©c gi√° h·∫•p d·∫´n</p>
            </div>
            <div class="row g-4">
                <div class="col-lg-3 col-md-6" th:each="product : ${hotProducts}">
                    <div class="product-card">
                        <img th:src="${product.imageUrl}" 
                             th:alt="${product.name}"
                             onerror="this.src='https://via.placeholder.com/200x200/0a0e27/00ff88?text=Gaming'">
                        <h5 th:text="${product.name}">Gaming Product</h5>
                        <div>
                            <span class="product-price-old" th:if="${product.discountPrice != null}"
                                  th:text="${#numbers.formatInteger(product.price, 0, 'COMMA')} + '‚Ç´'">
                                1,590,000‚Ç´
                            </span>
                            <p class="product-price" 
                               th:text="${#numbers.formatInteger(product.getFinalPrice(), 0, 'COMMA')} + '‚Ç´'">
                                1,290,000‚Ç´
                            </p>
                        </div>
                        <a th:href="@{'/san-pham/' + ${product.id}}" class="btn btn-sm btn-primary w-100">
                            <i class="fas fa-eye"></i> Xem chi ti·∫øt
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Best Sellers -->
    <section class="products-section" th:if="${bestSellers != null and !bestSellers.isEmpty()}">
        <div class="container">
            <div class="section-title">
                <h2>‚≠ê S·∫£n ph·∫©m b√°n ch·∫°y</h2>
                <p>Nh·ªØng s·∫£n ph·∫©m y√™u th√≠ch c·ªßa kh√°ch h√†ng</p>
            </div>
            <div class="row g-4">
                <div class="col-lg-3 col-md-6" th:each="product : ${bestSellers}">
                    <div class="product-card">
                        <img th:src="${product.imageUrl}" 
                             th:alt="${product.name}"
                             onerror="this.src='https://via.placeholder.com/200x200/0a0e27/00ff88?text=Gaming'">
                        <h5 th:text="${product.name}">Gaming Product</h5>
                        <div>
                            <span class="product-price-old" th:if="${product.discountPrice != null}"
                                  th:text="${#numbers.formatInteger(product.price, 0, 'COMMA')} + '‚Ç´'">
                                1,590,000‚Ç´
                            </span>
                            <p class="product-price" 
                               th:text="${#numbers.formatInteger(product.getFinalPrice(), 0, 'COMMA')} + '‚Ç´'">
                                1,290,000‚Ç´
                            </p>
                        </div>
                        <a th:href="@{'/san-pham/' + ${product.id}}" class="btn btn-sm btn-primary w-100">
                            <i class="fas fa-eye"></i> Xem chi ti·∫øt
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Empty State -->
    <section class="products-section" th:if="${(hotProducts == null or hotProducts.isEmpty()) and (bestSellers == null or bestSellers.isEmpty())}">
        <div class="container text-center">
            <div style="padding: 4rem 0;">
                <i class="fas fa-box-open" style="font-size: 4rem; color: var(--text-secondary); margin-bottom: 1rem;"></i>
                <h3>Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</h3>
                <p class="text-secondary">Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi database v√† kh·ªüi ƒë·ªông l·∫°i ·ª©ng d·ª•ng</p>
                <div class="mt-3">
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>H∆∞·ªõng d·∫´n:</strong><br>
                        1. Ki·ªÉm tra SQL Server ƒë√£ ch·∫°y ch∆∞a<br>
                        2. Ki·ªÉm tra th√¥ng tin database trong application.properties<br>
                        3. Restart ·ª©ng d·ª•ng ƒë·ªÉ DataInitializer t·∫°o d·ªØ li·ªáu m·∫´u
                    </p>
                </div>
                <a sec:authorize="hasRole('ADMIN')" th:href="@{/admin/products}" class="btn btn-primary mt-3">
                    <i class="fas fa-plus"></i> V√†o trang qu·∫£n tr·ªã
                </a>
            </div>
        </div>
    </section>

    <!-- All Products Link -->
    <section style="padding: 3rem 0; text-align: center;">
        <a th:href="@{/san-pham}" class="btn btn-primary btn-lg">
            <i class="fas fa-th"></i> Xem t·∫•t c·∫£ s·∫£n ph·∫©m
        </a>
    </section>

    <!-- Footer -->
    <div th:replace="~{layout/footer :: footer}"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>